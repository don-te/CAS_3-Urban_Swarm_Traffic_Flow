 <ProjectManual>

    <Metadata>

        <ProjectName>Indian Street Social Physics: Electronic Homeostasis & Complex Systems</ProjectName>

        <CurrentPhase>Phase 3: Visualization & Control Implementation</CurrentPhase>

        <Date>2025-12-08</Date>

        <Objective>

            Simulate an Indian street intersection using Macroscopic Social Force Models. 

            The goal is to study the "Regime Shift" between chaotic flow, regulated flow, and systemic collapse (Hartal/Strike).

        </Objective>

    </Metadata>


    <ConceptualFramework>

        <CoreTheory>

            [cite_start]Based on "Electronic Homeostasis and Self-Organization"[cite: 1, 32].

            Combines "Social Homeostasis" (internal agent needs) with "Human-AI Teaming" (external police control).

        </CoreTheory>

        <Analogy>

            <Agent>Auto Rickshaw (The Particle)</Agent>

            <Regulator>Police Drone (The Force Field)</Regulator>

            <Perturbation>Greed (Overloading passengers) vs. Fear (Police proximity).</Perturbation>

            <Collapse>Hartal (Strike) - A phase transition where movement stops due to excessive regulation/fear.</Collapse>

        </Analogy>

    </ConceptualFramework>


    <PhysicsModel>

        <Scale>

            10 pixels = 1 meter.

            Time Step = 0.02s (Human reaction time).

            Environment = 800x600 pixels (80m x 60m junction).

        </Scale>

        <Dynamics>

            <Law>Newton's Second Law (F=ma). Mass acts as "Stubbornness" or Social Inertia.</Law>

            <Interaction>Lennard-Jones Potential adapted for "Social Comfort Zones".</Interaction>

            <ForceField>Repulsive "Fear Field" generated by the Police Drone.</ForceField>

        </Dynamics>

    </PhysicsModel>


    <AgentDefinition type="AutoRickshaw">

        <States>

            <State name="S0">Compliant. Mass=1.0. Maintains safe distance (Sigma=25.0).</State>

            <State name="S1">Aggressive/Greedy. Mass=3.0 (Overloaded). High inertia, harder to stop.</State>

            <State name="Strike">Frozen. Velocity=0. Triggered if Fear > Panic Threshold.</State>

        </States>

        <Variables>

            <Var name="passenger_count">0 to 5. Increases Mass linearly.</Var>

            <Var name="fear_level">0.0 to 1.0. Increases when near Police. Decays over time.</Var>

        </Variables>

        <Behaviors>

            <Rule1>Greed: If Fear is low, probability to pick up passenger increases.</Rule1>

            <Rule2>Fear: If Distance to Police < Sight Range, Fear increases.</Rule2>

            <Rule3>Physics: Overloaded agents react slower to impulses (F=ma).</Rule3>

        </Behaviors>

    </AgentDefinition>


    <ConfigurationFile>

        <Filename>config.py</Filename>

        <Status>Corrected & Verified</Status>

        <Content><![CDATA[

# config.py - MACROSCOPIC TRAFFIC SOCIAL PHYSICS


# --- Space & Time Scaling ---

PIXELS_PER_METER = 10.0

ENV_WIDTH = 800

ENV_HEIGHT = 600

ENV_SIZE = (ENV_WIDTH, ENV_HEIGHT)

TIME_STEP = 0.02 


# --- Simulation Constants ---

AGENT_COUNT = 50           

GRID_CELL_SIZE = 80.0      

MIN_INTERACTION_DIST = 25.0 


# --- Physics Limits ---

MAX_SPEED = 120.0          

FRICTION = 0.98            


# --- Social Masses ---

MASS_EMPTY = 1.0           

MASS_OVERLOADED = 3.0      


# --- Social Forces ---

SIGMA_S0 = 25.0            

EPSILON_S0 = 50.0          

SIGMA_S1 = 20.0            

EPSILON_S1 = 200.0         


# --- The Police (Drone) ---

POLICE_MASS = 10.0         

POLICE_SIGMA = 60.0        

POLICE_EPSILON = 1000.0    

PANIC_THRESHOLD = 0.8      

SIGHT_RANGE = 150.0        

        ]]></Content>

    </ConfigurationFile>


    <SourceCode>

        <File name="physics_engine.py">

            <Description>Handles the simulation loop, Euler integration, and Social Logic (Fear/Greed).</Description>

            <KeyFeatures>AutoRickshaw Class, Grid Optimization, Fear Calculation.</KeyFeatures>

            <Content><![CDATA[

# [Insert the code provided in the previous turn for physics_engine.py]

# Key logic:

# if dist < c.SIGHT_RANGE: p.fear_level += ...

# if p.fear_level > c.PANIC_THRESHOLD: p.is_on_strike = True

# p.acceleration = p.net_force / p.mass (Dynamic Mass)

            ]]></Content>

        </File>

        <File name="visualizer.py">

            <Description>Bokeh Server for Real-time Dashboard.</Description>

            <KeyFeatures>Maps Fear to Color (Green->Red), Mass to Size. Plots Panic Metrics.</KeyFeatures>

            <Status>Fixed bad column name error using Span for thresholds.</Status>

            <Content><![CDATA[

# [Insert the code provided in the previous turn for visualizer.py]

            ]]></Content>

        </File>

        <File name="simulation_app.py">

            <Description>Streamlit Controller.</Description>

            <KeyFeatures>Multiprocessing management. Police Drone Controls (Force Vector + Magnitude).</KeyFeatures>

            <Content><![CDATA[

# [Insert the code provided in the previous turn for simulation_app.py]

            ]]></Content>

        </File>

    </SourceCode>


    <OperationalNotes>

        <Startup>Run 'streamlit run simulation_app.py'.</Startup>

        <KnownIssues>

            Multiprocessing requires 'if __name__ == "__main__":' guard on Windows/Mac.

            Port 5006 must be free for Bokeh.

        </KnownIssues>

        <CurrentStatus>

            The simulation correctly runs. 

            Agents exhibit "Greed" (growing larger) when left alone.

            Agents exhibit "Fear" (turning red) when Police approach.

            System enters "Hartal" (Strike) if Fear > 0.8.

        </CurrentStatus>

    </OperationalNotes>

</ProjectManual> 
